<!DOCTYPE html>
<html><head>
  <meta charset="utf-8">

  <meta name="viewport"
        content="width=device-width,
                  initial-scale=1,
                  minimum-scale=1,
                  maximum-scale=1,
                  user-scalable=no,
                  minimal-ui">

  <link rel="apple-touch-icon" sizes="57x57" href="/favicons/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/favicons/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/favicons/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/favicons/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/favicons/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/favicons/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/favicons/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/favicons/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/favicons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="160x160" href="/favicons/favicon-160x160.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/favicons/favicon-192x192.png">
  <meta name="msapplication-TileColor" content="#00acc1">
  <meta name="msapplication-TileImage" content="/favicons/mstile-144x144.png">

  <link href="https://fonts.googleapis.com/css?family=Material+Icons&display=block" rel="stylesheet">
  <link rel="stylesheet" href="/bundle.css"/>
</head>
<body>

<div class="w-full fixed top-0">
  <div class="bg-[url('/images/background.svg')] bg-no-repeat [background-size:100%] py-[16px] px-[12px] flex flex-row">
    <a href="/">
      <img src="/images/v-icon-white.svg"/>
    </a>

    <div class="text-white pl-[20px] text-[20px] font-medium">
      Vanadium Core
    </div>

    <div class="grow"></div>

    <a href="https://github.com/" class="fill-white">
      <svg viewBox="0 0 16 16" class="w-[32px]">
        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
      </svg>
    </a>
  </div>
</div><div class="fixed top-[64px] left-0 w-[200px] z-10 h-[calc(100%-64px)] bg-gray-50">
  <nav class="overflow-y-auto h-full py-4 pl-4 leading-[20px] text-[14px]">
    <a href="/overview">Overview</a>
    <a href="/installation">Installation</a>
    <div>Tutorials</div>
    <nav class="pl-3">
      <a href="/tutorials/hello-world">Hello World</a>
      <a href="/tutorials/basics">Client/Server Basics</a>

      <div>Security</div>
      <nav class="pl-3">
        <a href="/tutorials/security">Overview</a>
        <a href="/tutorials/security/principals-and-blessings">Principal and Blessings</a>
        <a href="/tutorials/security/permissions-authorizer">Permissions Authorizer</a>
        <a href="/tutorials/security/first-party-caveats">Caveats</a>
        <a href="/tutorials/security/third-party-caveats">Third-party Caveats</a>
        <a href="/tutorials/security/agent">The Agent</a>
        <a href="/tutorials/security/custom-authorizer">Customer Authorizer</a>
      </nav>

      <div>Naming</div>
      <nav class="pl-3">
        <a href="/tutorials/naming">Overview</a>
        <a href="/tutorials/naming/mount-table">The Mount Table</a>
        <a href="/tutorials/naming/namespace">Namespaces</a>
        <a href="/tutorials/naming/suffix-part1">The Suffix - Part I</a>
        <a href="/tutorials/naming/suffix-part2">The Suffix - Part II</a>
        <a href="/tutorials/naming/globber">Globber</a>
      </nav>

      <div>Java</div>
      <nav class="pl-3">
        <a href="/tutorials/java">Overview</a>
        <a href="/tutorials/java/fortune">Fortune in Java</a>
        <a href="/tutorials/java/android">Location Service in Android</a>
      </nav>

      <a href="/tutorials/faq">Tutorial FAQ</a>
    </nav>

    <div>Concepts</div>
    <nav class="pl-3">
      <a href="/concepts/rpc">RPC System</a>
      <a href="/concepts/naming">Naming</a>
      <a href="/concepts/security">Security</a>
      <a href="/concepts/device-management">Device Management</a>
    </nav>

    <div>Design Docs</div>
    <nav class="pl-3">
      <a href="/designdocs/authentication">Authentication Protocol</a>
      <a href="/designdocs/identity-service">Identity Service</a>
      <a href="/designdocs/vdl-spec">VDL Specification</a>
      <a href="/designdocs/vom-spec">VOM Specification</a>
    </nav>

    <a href="/api-reference">API Reference</a>
    <a href="/glossary">Glossary</a>
    <a href="/faq">FAQ</a>

    <div>Community</div>
    <nav class="pl-3">
      <a href="/community/coding-guidelines">Coding Guidelines</a>
      <a href="/community/contributing">Contributing</a>
      <a href="/community/mailing-lists">Mailing List</a>
      <a href="/community/roadmap">Roadmap</a>
    </nav>
  </nav>
</div>

  <div class="hidden xl:block fixed top-[64px] right-0 w-[200px] p-4 text-[14px] border-l-4 border-l-gray-100 h-[calc(100%-64px)]">
    <div class="uppercase font-medium pb-3">Coding Guidelines</div>
    <nav id="TableOfContents">
  <ul>
    <li><a href="#code-organization">Code organization</a></li>
    <li><a href="#go">Go</a>
      <ul>
        <li><a href="#interfaces">Interfaces</a></li>
        <li><a href="#testing">Testing</a></li>
      </ul>
    </li>
    <li><a href="#vdl">VDL</a></li>
    <li><a href="#shell">Shell</a></li>
  </ul>
</nav>
  </div>

<div class="flex flex-col h-screen pt-[64px]">
  <div class="ml-[200px] px-11 w-[800px]">
    <h1 class="text-primary-color text-[48px]">Coding Guidelines</h1>

    
<content>
      <h1 id="code-organization">Code organization</h1>
<p>Vanadium is spread across multiple <a href="https://github.com/vanadium">git repositories</a>. The [contributor
installation] process arranges these repositories as follows (some repositories
omitted, for brevity):</p>
<pre tabindex="0"><code> $JIRI_ROOT
   .jiri_root        # Jiri utils and metadata
     bin             # Contributor tool binaries
     scripts/jiri    # Jiri command-line tool
   environment       # Platform-dependent configuration
   manifest          # Multi-repo configuration data
   release           # Source code
     go/src/v.io/v23 # Interfaces
     go/src/v.io/x   # Implementation
       devtools      # Contributor tool source code
       lib           # Developer libs
       ref           # Reference implementation of v23
     javascript      # JS interfaces and implementation
     projects        # Example apps
       playground    # Write/build/run v23 code on the web
       browser       # Vanadium namespace browser
       chat          # Chat program
   third_party       # Third-party code
   website           # Source for this site
</code></pre><p>Each repository has a <code>README.md</code> file summarizing its purpose.  The <code>manifest</code>
repository contains the configuration that describes this repository
arrangement.</p>
<p>Things move around, so its best to examine your local installation for the
latest arrangement.</p>
<!--
TODO:
- Suggestions for how to name things (hyphens vs. underscores).
- Using optional arguments: variadic functions / varargs vs. Options structs.
-->
<h1 id="go">Go</h1>
<p>Use <a href="https://golang.org/cmd/gofmt/">gofmt</a> and suggestions from <a href="http://golang.org/doc/effective_go.html">Effective Go</a>.</p>
<h2 id="interfaces">Interfaces</h2>
<p>Vanadium interfaces are defined in the <a href="https://github.com/vanadium/go.v23"><code>go/src/v.io/v23</code></a>
tree in files named <code>model.go</code>.  For example, the file
<a href="https://github.com/vanadium/go.v23/blob/master/security/model.go"><code>security/model.go</code></a> holds security interface
definitions.</p>
<h2 id="testing">Testing</h2>
<p>A test for package <code>foo</code> should be in package <code>foo_test</code>. This way, tests can
depend on anything they like without introducing cycles or affecting non-test
binaries.</p>
<p>If a test must touch the internals of some package <code>foo</code>, that test can be in
package <code>foo</code>, but must keep its dependencies to a minimum, and must have a name
that ends with <code>_internal_test.go</code>.</p>
<p>Most tests should import the <a href="https://github.com/vanadium/go.ref/tree/master/test"><code>v.io/x/ref/test</code> package</a>
and invoke its <a href="https://github.com/vanadium/go.ref/blob/master/test/init.go"><code>Init</code> function</a> in order to configure
logging, random number generators etc. Doing so will assist in
debugging failing tests. For example:</p>
<ul>
<li>The <code>-vv</code> and <code>-vmodule</code> flags can be used to control logging verbosity</li>
<li>The seed of the random number generator is logged when running tests. This
is useful when trying to reproduce failures that may not occur when the
random number generator is seeded differently.</li>
</ul>
<!-- TODO: Explain modules, expect, timekeeper? -->
<!-- TODO: Describe dependency management (apis vs. impls, what can depend on
what). -->
<h1 id="vdl">VDL</h1>
<p>The <code>vdl</code> tool uses VDL files to generate files containing <a href="/2016/glossary.html#remote-procedure-call-rpc-">RPC</a> stub code for
various languages - Go, Java, JavaScript, etc.</p>
<p><a href="/2016/glossary.html#vandium-definition-language-vdl-">VDL</a> is not Go, but is modeled after Go, so VDL code should follow
Go&rsquo;s style guidelines.</p>
<p>VDL files have a <a href="https://golang.org/doc/code.html#PackagePaths">Go-like notion of packages</a>.  Go code
generated from a VDL file must appear in a location that respects both
the VDL file&rsquo;s package name and the value of <code>GOPATH</code>.  In a Go-based
project like Vanadium, the simplest way to accomplish this is to place
VDL source files into the <code>go/src</code> tree at the location that the
generated Go should be placed.</p>
<h1 id="shell">Shell</h1>
<p>We prefer Go programs over shell scripts for jobs traditionally given
to shell scripts.</p>
<p>If you must write a shell script, follow the
<a href="https://google-styleguide.googlecode.com/svn/trunk/shell.xml">Google Shell Style Guide</a>.</p>

    </content>
 </div>

 <nav class="flex flex-wrap-reverse mt-6 ml-[200px] z-[1]">
  

  
</nav>

  
</div>

</body>
</html>
